<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>MessageReceiver.sqf</title><link rel="stylesheet" type="text/css" href="../../styles/main.css" /><script type="text/javascript" src="../../styles/main.js"></script><script type="text/javascript">NDLoader.LoadJS("Content", "../../styles/");</script></head>

<!-- Generated by Natural Docs, version 2.0.2 -->

<!-- saved from url=(0016)http://localhost -->

<body onload="NDLoader.OnLoad('Content');" class="NDPage NDContentPage">

<a name="MessageReceiver"></a><a name="Topic863"></a><div class="CTopic TClass LSQF first">
 <div class="CTitle">MessageReceiver</div>
 <div class="CBody"><p>This class has capability to handle incoming messages. It also has ability to change its ownership in MP.&nbsp; Inherited classes must implement a getMessageLoop method which must return the <a href="../../index.html#File:MessageLoop/MessageLoop.sqf:MessageLoop" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,845);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >MessageLoop</a> object to which a message can be sent.</p><p>Author: Sparker 15.06.2018</p></div>
</div>

<a name="MessageReceiver.new"></a><a name="Topic864"></a><div class="CTopic TFunction LSQF">
 <div class="CTitle">new</div>
 <div class="CBody"><p>Sets initial ownership of the object</p></div>
</div>

<a name="MessageReceiver.delete"></a><a name="Topic865"></a><div class="CTopic TFunction LSQF">
 <div class="CTitle">delete</div>
 <div class="CBody"><p>Deletes this MessageReceiver and deletes messages directed to it from its <a href="../../index.html#File:MessageLoop/MessageLoop.sqf:MessageLoop" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,845);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >MessageLoop</a></p><p>Warning: should be called by the thread(&lt;MessageLoop&gt;) which owns this object</p></div>
</div>

<a name="MessageReceiver.getMessageLoop"></a><a name="Topic866"></a><div class="CTopic TFunction LSQF">
 <div class="CTitle">getMessageLoop</div>
 <div class="CBody"><p>Derived classes must implement this method if they need to receive messages.</p><p>Returns: <a href="../../index.html#File:MessageLoop/MessageLoop.sqf:MessageLoop" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,845);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >MessageLoop</a> object</p></div>
</div>

<a name="MessageReceiver.handleMessage"></a><a name="Topic867"></a><div class="CTopic TFunction LSQF">
 <div class="CTitle">handleMessage</div>
 <div class="CBody"><p>Handles messages sent to this MessageReceiver. Called by <a href="../../index.html#File:MessageLoop/MessageLoop.sqf:MessageLoop" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,845);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >MessageLoop</a> inside its thread.</p><p>Access: called by framework. But you can call it manually if you are sure that there will be no race conditions.</p><p>Derived classes can implement this method like this:</p><p>Returns: you can return whatever you need from here to later retrieve it by waitUntilMessageDone.</p><pre><span class="SHKeyword">switch</span>(_msgType) <span class="SHKeyword">do</span> {<br />    <span class="SHKeyword">case</span> <span class="SHString">&quot;DO_STUFF&quot;</span>: {...};<br />    <span class="SHKeyword">case</span> <span class="SHString">&quot;DO_OTHER_STUFF&quot;</span> : {...};<br />    default: {<span class="SHKeyword">return</span> baseClass::handleMessage(msg);}<br />}</pre></div>
</div>

<a name="MessageReceiver.postMessage"></a><a name="Topic868"></a><div class="CTopic TFunction LSQF">
 <div class="CTitle">postMessage</div>
 <div class="CBody"><p>Posts a message into the MessageLoop of this object The object can exist on this machine or on another machine If it exists on another machine, it still must be represented on this machine, at least it must have the &quot;owner&quot; variable set properly.</p><p>Parameters: _msg, _returnMsgID</p><table class="CDefinitionList"><tr><td class="CDLEntry">_msg</td><td class="CDLDefinition"><p>the <a href="../../index.html#File:Message/Message.hpp:Message" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,830);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Message</a> to send to this object.</p></td></tr><tr><td class="CDLEntry">_returnMsgID</td><td class="CDLDefinition"><p>Optional, Bool, default is false. If true, the framework generates a valid message ID which can be passed to waitUntilMessageDone or messageDone functions.</p></td></tr></table><p>Warning: _returnMsgID=true allocates resources that are deallocated by waitUntilMessageDone or messageDone.&nbsp; If you don't need to wait for the message processing completion, set _returnMsgID to false.</p><p>Returns: Number, message ID if _returnMsgID is true, MESSAGE_ID_INVALID otherwise.</p></div>
</div>

<a name="MessageReceiver.messageDone"></a><a name="Topic869"></a><div class="CTopic TFunction LSQF">
 <div class="CTitle">messageDone</div>
 <div class="CBody"><p>Returns true if the message with given msgID was done A proper msgID must be provided. Always returns true for negative msgID.&nbsp; Warning: Returns proper result only once for given msgID</p><p>Parameters: _msgID _msgID - the message ID returned by postMessage.</p><p>Returns: Bool</p></div>
</div>

<a name="MessageReceiver.waitUntilMessageDone"></a><a name="Topic870"></a><div class="CTopic TFunction LSQF">
 <div class="CTitle">waitUntilMessageDone</div>
 <div class="CBody"><p>Parameters: _msgID _msgID - the message ID returned by postMessage.</p><p>Returns: whatever was returned by handleMessage of the messageReceiver that was processing the message</p></div>
</div>

<a name="MessageReceiver.ownership_transfer"></a><a name="Topic871"></a><div class="CTopic TGroup LSQF">
 <div class="CTitle">ownership transfer</div>
</div>

<a name="MessageReceiver.setOwner"></a><a name="Topic872"></a><div class="CTopic TFunction LSQF">
 <div class="CTitle">setOwner</div>
 <div class="CBody"><p>Changes owner of a MessageReceiver.</p><p>Parameters: _newOwner</p><table class="CDefinitionList"><tr><td class="CDLEntry">_newOwner</td><td class="CDLDefinition"><p>owner ID of the machine that will receive ownership</p></td></tr></table><p>Warning: must be called in scheduled environment as it waits until the other machine accepts ownership.</p><p>Returns: Bool, true if ownership was changed successfully, false otherwise.</p></div>
</div>

<a name="MessageReceiver.receiveOwnership"></a><a name="Topic873"></a><div class="CTopic TFunction LSQF">
 <div class="CTitle">receiveOwnership</div>
 <div class="CBody"><p>Called on remote machine when an ownership change is in the process.</p><p>Access: Internal use only! Don't override!</p><p>Parameters: _objParent, _uniqueID, _serialData</p><p>Returns: nil</p></div>
</div>

<a name="MessageReceiver.serialize"></a><a name="Topic874"></a><div class="CTopic TFunction LSQF">
 <div class="CTitle">serialize</div>
 <div class="CBody"><p>Must return a single value which can be deserialized by deserialize method to restore value of an object.</p><p>Override if you need to transfer ownership of objects of your inherited class.</p><p>Returns: anything you need which can be sent over network.</p></div>
</div>

<a name="MessageReceiver.deserialize"></a><a name="Topic875"></a><div class="CTopic TFunction LSQF">
 <div class="CTitle">deserialize</div>
 <div class="CBody"><p>Takes the output of serialize and restores values of an object</p><p>Override if you need to transfer ownership of objects of your inherited class.</p><p>Returns: nil</p></div>
</div>

<a name="MessageReceiver.transferOwnership"></a><a name="Topic876"></a><div class="CTopic TFunction LSQF last">
 <div class="CTitle">transferOwnership</div>
 <div class="CBody"><p>Called on local machine when an ownership transfer is in the progress.&nbsp; If your class has objects that must be transfered through the same mechanism, you must handle transfer of ownership of such objects here.&nbsp; If transfer of all objects has happened properly, must return true.</p><p>You can also clear unneeded variables of this object here.</p><p>Parameters: _newOwner</p><table class="CDefinitionList"><tr><td class="CDLEntry">_newOwner</td><td class="CDLDefinition"><p>owner ID of the machine that will receive ownership</p></td></tr></table><p>Returns: Bool</p></div>
</div>

</body></html>